'use client';

import { motion } from 'framer-motion';
import React from "react";


interface MH_Level1Props {
  renderSpot: (
    id: string,
    d: string,
    latestSpot: string | undefined
  ) => React.JSX.Element;
  latestSpot: string | undefined;
}

export default function MH_Level1({
  renderSpot,
  latestSpot,
}: MH_Level1Props) {
  const dMap: Record<string, string> = {
    C100C2: 'M331.03 209.71h462.6v24.62h-462.6z',
    C100C3: 'M300.31 258.28h28.3v252.06h-28.3z',
    C102: 'M205.03 337.94L197.77 461.18H297.19V338.12L205.03 337.94Z',
    C100C8: 'M799.17 236.43h45.91v312.82h-45.91z',
  };

  const nonSelectedSpots = Object.keys(dMap).filter(
    (id) => id !== latestSpot
  );

  return (
    <>
      {/* Base boundary */}
      <polygon
        id="Base"
        points="898.27 98.32 209.05 148.18 207.61 172.82 227.93 172.82 227.93 191.95 281.11 191.95 281.11 223.27 227.93 223.27 227.93 215.01 205.15 215.01 178.33 674.08 977.47 674.08 898.27 98.32"
        fill="none"
        stroke="#c2c1c0"
			/>

      {/* Gray rooms */}
      <motion.g
        id="GrayRooms"
        initial={{ opacity: 0, scale: 0.98 }}
        animate={{ opacity: 1, scale: 1 }}
        transition={{ delay: 0.2, duration: 0.4 }}
      >
        <g id="MH_F1_Gray" fill="#c2c1c0">
          <polygon id="StudioS" points="406.33 236.43 406.33 258.28 331.03 258.28 331.03 508.92 376.35 508.92 376.35 549.26 492.36 549.26 492.36 508.92 639.93 508.92 639.93 549.26 793.63 549.26 793.63 508.92 793.63 500.47 793.63 287.08 793.63 255.67 793.63 236.43 406.33 236.43" />
          <polygon id="C101A" points="205.09 335.07 207.59 294.61 297.19 294.61 297.19 334.74 205.09 335.07" />
          <rect id="C110" x="344.89" y="572.5" width="176.46" height="92.16" />
          <rect id="C111" x="523.81" y="572.5" width="103.72" height="92.16" />
          <rect id="C112" x="629.35" y="572.5" width="114.18" height="92.16" />
          <rect id="C113" x="746.53" y="572.5" width="98.55" height="92.16" />
          <polygon id="C114" points="970.09 664.66 954.37 549.94 849.85 549.94 849.85 664.66 970.09 664.66" />
          <polygon id="C115" points="923.53 330.76 952.85 544.74 849.85 544.74 849.85 331.12 923.53 330.76" />
          <polygon id="Utilities" points="364.08 141.64 364.08 207.85 431.11 207.85 431.11 148.6 517.27 148.6 517.27 207.85 631 207.85 631 148.6 717.16 148.6 717.16 207.85 793.63 207.85 793.63 110.92 364.08 141.64" />
          <polygon id="elevator" points="356.74 142.9 331.03 144.23 331.03 188.43 356.64 188.43 356.74 142.9" />
          <rect id="bathroom1" x="433.99" y="151.18" width="80.64" height="55.68" />
          <rect id="bathroom2" x="633.7" y="151.18" width="80.64" height="55.68" />
          <polygon id="stairs" points="855.25 108.28 891.75 105.94 905.53 205.6 855.25 205.6 855.25 108.28" />
          <path id="C1055" d="M308.38,572.08v-3.04c7.35-4.64,12.23-12.83,12.23-22.16,0-13.53-10.25-24.66-23.42-26.06v-57.64h-99.53l-12.55,201.48h157.92v-92.58h-34.65Z" />
          <rect id="A100B" x="343.96" y="510.34" width="30.69" height="38.92" />
          <polygon id="C101" points="240.01 258.28 221.74 289.54 240.01 289.54 297.19 289.54 297.19 258.28 240.01 258.28" />
          <polygon id="C100A" points="233.53 149.98 281.11 146.17 281.11 184.96 233.53 184.96 233.53 149.98" />
          <rect id="wall" x="532.83" y="546.54" width="82.78" height="4.04" />
        </g>
      </motion.g>

      {/* Green interactive spots */}
      <motion.g
        id="GreenSpots"
        initial={{ opacity: 0, scale: 0.95 }}
        animate={{ opacity: 1, scale: 1 }}
        transition={{ delay: 0.5, duration: 0.4 }}
      >
        {nonSelectedSpots.map((id) => renderSpot(id, dMap[id], latestSpot))}
      </motion.g>

      {/* Decorative Elements */}
      <motion.g
        id="Decorations"
        initial={{ opacity: 0, y: 10 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ delay: 0.8, duration: 0.4 }}
      >
        <g id="MH_F1_Decorations" stroke="#545554" fill="none">
          <g id="Stair1">
						<rect
							fill="#d6d4c9"
							x="841.26"
							y="152.91"
							width="68.39"
							height="28.42"
							transform="rotate(90 875.455 167.12)" // rotation adjusted with center
						/>
						<g stroke="#6c584c" strokeWidth={1}>
							{[143.53, 149.39, 155.25, 161.1, 166.96, 172.82, 178.67, 184.53, 190.39].map((y) => (
								<line key={y} x1={889.83} y1={y} x2={861.41} y2={y} />
							))}
						</g>
						<g stroke="#6c584c" strokeWidth={1}>
							<line x1="880.92" y1="142.52" x2="880.92" y2="198.96" />
							<polygon fill="#6c584c" points="880.94 134.34 885.03 142.52 876.85 142.52" />
							<line x1="867.46" y1="191.95" x2="867.46" y2="135.51" />
							<polygon fill="#6c584c" points="867.48 200.13 871.57 191.95 863.39 191.95" />
						</g>
					</g>

					<g id="Bathrooms" fill="#6c584c">
						<path
							id="bathroom1"
							d="M666.88,189.7c-.58,0-1.14,0-1.69,0-1.91-.03-3.6-1.68-3.67-3.58-.02-.64.11-.79.74-.79.9,0,1.79,0,2.69,0,.03,0,.05-.01.17-.04-2.21-1.54-3.49-3.59-3.59-6.3-.09-2.7.96-4.88,3.08-6.5,3.02-2.32,7.46-1.9,10.04.94,1.61,1.77,2.28,3.88,1.98,6.28-.3,2.39-1.54,4.21-3.45,5.63.82,0,1.65.03,2.47,0,1.04-.04,1.2.17.98,1.26-.37,1.89-1.88,3.11-3.77,3.12-.5,0-1,0-1.53,0,.12,1.33.22,2.6.34,3.87.15,1.67.3,3.35.46,5.02.05.6.12,1.21.15,1.81.01.27.11.35.37.35,1.06-.01,2.12,0,3.18,0,1.65,0,3.29,0,4.94,0,.13,0,.27-.01.42-.02.26-1.58.5-3.14.77-4.7.05-.31-.15-.34-.31-.44-1.71-1.05-2.66-2.59-2.7-4.61-.01-.61.07-1.22,0-1.85-.09-.75.46-1.32,1.33-1.61-.23-.34-.47-.67-.68-1.02-.46-.74-.67-1.56-.67-2.43,0-1.21,0-2.43,0-3.64,0-1.04.65-1.71,1.67-1.72,2.52,0,5.03,0,7.55,0,.93,0,1.6.67,1.61,1.61.02,1.25,0,2.51,0,3.76,0,1.21-.42,2.26-1.18,3.18-.06.07-.11.15-.17.22.26.13.51.23.72.39.58.44.77,1.21.51,1.93-.04.12-.11.28-.07.37.34.64.18,1.3.03,1.93-.36,1.54-1.24,2.71-2.6,3.49-.24.14-.32.29-.27.56.24,1.4.49,2.79.7,4.19.05.36.19.42.5.41.73-.02,1.47-.02,2.2,0,.2,0,.45.08.58.21.28.27.1.75-.28.83-.13.03-.27.03-.41.03-9.54,0-19.09,0-28.63,0-.18,0-.38.04-.52-.03-.18-.1-.38-.28-.43-.46-.07-.25.08-.49.37-.54.16-.03.32-.05.48-.05,1.4,0,2.8,0,4.2,0,.3,0,.42-.06.45-.4.28-3.21.57-6.42.86-9.63.03-.31.04-.63.06-1.03ZM668.57,185.24c0-.19,0-.36,0-.54.01-1.09-.02-2.18.06-3.26.07-1,.97-1.69,1.96-1.64.94.05,1.73.86,1.77,1.84.01.26,0,.52,0,.79,0,.41-.2.65-.52.65-.33,0-.51-.23-.53-.64-.01-.32,0-.64-.06-.94-.07-.38-.45-.64-.81-.62-.39.02-.72.32-.78.72-.02.14-.03.27-.03.41,0,.97,0,1.93,0,2.9,0,.12.02.24.04.39.25-.05.55.1.53-.34-.01-.35.07-.68.51-.71.42-.03.52.27.57.61,0,.02.03.04.05.06,2.55-.83,4.82-3.77,4.22-7.34-.54-3.23-3.44-5.7-6.94-5.49-3.04.18-5.74,2.79-6.02,6.04-.31,3.56,2.13,6.15,4.32,6.8.07-.33.15-.68.58-.66.67.03.43.64.59,1.01h.49ZM684.33,179.77c-1.19,0-2.39,0-3.58,0-.6,0-.78.18-.78.78,0,1.02.04,2.04,0,3.06-.08,1.56.58,2.76,1.71,3.73.11.1.29.16.43.16,1.29.01,2.58-.04,3.86.02.66.03,1.11-.19,1.55-.67.77-.85,1.21-1.8,1.19-2.97-.02-1.13,0-2.26,0-3.39,0-.53-.19-.73-.7-.73-1.22,0-2.44,0-3.67,0ZM667.95,189.72c-.33,3.69-.66,7.34-.98,10.99h4.27c-.33-3.68-.66-7.32-.99-10.99h-2.3ZM688.71,190.86c-.09-.04-.12-.06-.14-.06-2.77,0-5.54,0-8.31-.01-.28,0-.3.14-.28.37.28,3.25,3.72,5.11,6.52,3.5,1.43-.83,2.14-2.13,2.21-3.8ZM662.63,186.41c.05.18.08.34.15.49.51,1.17,1.42,1.73,2.67,1.74,1.78.01,3.56.02,5.34.01.89,0,1.79.01,2.68-.09,1.07-.13,2.01-1.15,2.09-2.14h-12.92ZM686.42,200.71c-.25-1.53-.5-3.03-.74-4.47h-2.71c-.24,1.45-.48,2.95-.73,4.47h4.17ZM684.35,189.73c.58,0,1.17,0,1.75,0,.68,0,1.36,0,2.04,0,.33,0,.53-.2.55-.54.02-.32-.16-.52-.48-.57-.16-.03-.32-.03-.49-.03-.96,0-1.92,0-2.89,0-1.37,0-2.74,0-4.1,0-.49,0-.78.23-.78.6,0,.34.29.55.76.55,1.21,0,2.42,0,3.63,0Z"
							// trimmed for space — paste full path here
						/>
						<path
							id="bathroom2"
							d="M468.86,189.7c-.58,0-1.14,0-1.69,0-1.91-.03-3.6-1.68-3.67-3.58-.02-.64.11-.79.74-.79.9,0,1.79,0,2.69,0,.03,0,.05-.01.17-.04-2.21-1.54-3.49-3.59-3.59-6.3-.09-2.7.96-4.88,3.08-6.5,3.02-2.32,7.46-1.9,10.04.94,1.61,1.77,2.28,3.88,1.98,6.28-.3,2.39-1.54,4.21-3.45,5.63.82,0,1.65.03,2.47,0,1.04-.04,1.2.17.98,1.26-.37,1.89-1.88,3.11-3.77,3.12-.5,0-1,0-1.53,0,.12,1.33.22,2.6.34,3.87.15,1.67.3,3.35.46,5.02.05.6.12,1.21.15,1.81.01.27.11.35.37.35,1.06-.01,2.12,0,3.18,0,1.65,0,3.29,0,4.94,0,.13,0,.27-.01.42-.02.26-1.58.5-3.14.77-4.7.05-.31-.15-.34-.31-.44-1.71-1.05-2.66-2.59-2.7-4.61-.01-.61.07-1.22,0-1.85-.09-.75.46-1.32,1.33-1.61-.23-.34-.47-.67-.68-1.02-.46-.74-.67-1.56-.67-2.43,0-1.21,0-2.43,0-3.64,0-1.04.65-1.71,1.67-1.72,2.52,0,5.03,0,7.55,0,.93,0,1.6.67,1.61,1.61.02,1.25,0,2.51,0,3.76,0,1.21-.42,2.26-1.18,3.18-.06.07-.11.15-.17.22.26.13.51.23.72.39.58.44.77,1.21.51,1.93-.04.12-.11.28-.07.37.34.64.18,1.3.03,1.93-.36,1.54-1.24,2.71-2.6,3.49-.24.14-.32.29-.27.56.24,1.4.49,2.79.7,4.19.05.36.19.42.5.41.73-.02,1.47-.02,2.2,0,.2,0,.45.08.58.21.28.27.1.75-.28.83-.13.03-.27.03-.41.03-9.54,0-19.09,0-28.63,0-.18,0-.38.04-.52-.03-.18-.1-.38-.28-.43-.46-.07-.25.08-.49.37-.54.16-.03.32-.05.48-.05,1.4,0,2.8,0,4.2,0,.3,0,.42-.06.45-.4.28-3.21.57-6.42.86-9.63.03-.31.04-.63.06-1.03ZM470.55,185.24c0-.19,0-.36,0-.54.01-1.09-.02-2.18.06-3.26.07-1,.97-1.69,1.96-1.64.94.05,1.73.86,1.77,1.84.01.26,0,.52,0,.79,0,.41-.2.65-.52.65-.33,0-.51-.23-.53-.64-.01-.32,0-.64-.06-.94-.07-.38-.45-.64-.81-.62-.39.02-.72.32-.78.72-.02.14-.03.27-.03.41,0,.97,0,1.93,0,2.9,0,.12.02.24.04.39.25-.05.55.1.53-.34-.01-.35.07-.68.51-.71.42-.03.52.27.57.61,0,.02.03.04.05.06,2.55-.83,4.82-3.77,4.22-7.34-.54-3.23-3.44-5.7-6.94-5.49-3.04.18-5.74,2.79-6.02,6.04-.31,3.56,2.13,6.15,4.32,6.8.07-.33.15-.68.58-.66.67.03.43.64.59,1.01h.49ZM486.32,179.77c-1.19,0-2.39,0-3.58,0-.6,0-.78.18-.78.78,0,1.02.04,2.04,0,3.06-.08,1.56.58,2.76,1.71,3.73.11.1.29.16.43.16,1.29.01,2.58-.04,3.86.02.66.03,1.11-.19,1.55-.67.77-.85,1.21-1.8,1.19-2.97-.02-1.13,0-2.26,0-3.39,0-.53-.19-.73-.7-.73-1.22,0-2.44,0-3.67,0ZM469.94,189.72c-.33,3.69-.66,7.34-.98,10.99h4.27c-.33-3.68-.66-7.32-.99-10.99h-2.3ZM490.7,190.86c-.09-.04-.12-.06-.14-.06-2.77,0-5.54,0-8.31-.01-.28,0-.3.14-.28.37.28,3.25,3.72,5.11,6.52,3.5,1.43-.83,2.14-2.13,2.21-3.8ZM464.61,186.41c.05.18.08.34.15.49.51,1.17,1.42,1.73,2.67,1.74,1.78.01,3.56.02,5.34.01.89,0,1.79.01,2.68-.09,1.07-.13,2.01-1.15,2.09-2.14h-12.92ZM488.41,200.71c-.25-1.53-.5-3.03-.74-4.47h-2.71c-.24,1.45-.48,2.95-.73,4.47h4.17ZM486.34,189.73c.58,0,1.17,0,1.75,0,.68,0,1.36,0,2.04,0,.33,0,.53-.2.55-.54.02-.32-.16-.52-.48-.57-.16-.03-.32-.03-.49-.03-.96,0-1.92,0-2.89,0-1.37,0-2.74,0-4.1,0-.49,0-.78.23-.78.6,0,.34.29.55.76.55,1.21,0,2.42,0,3.63,0Z"
							// trimmed for space — paste full path here
						/>
					</g>
        </g>
      </motion.g>

      {/* Optional: navigation paths */}
      <motion.g
        id="Level1_Path"
        stroke="#6c584c"
        fill="none"
        strokeWidth={1}
        strokeDasharray="10 6"
        opacity={0.65}
        initial={{ strokeDashoffset: 80, opacity: 0 }}
        animate={{ strokeDashoffset: 0, opacity: 1 }}
        transition={{ delay: 1.2, duration: 1.2, ease: 'easeInOut' }}
      >
          {/* Group 1 */}
					<line x1="197.77" y1="205.6" x2="203.77" y2="205.6" />
					<line x1="214.09" y1="205.6" x2="250.2" y2="205.6" />
					<polyline points="255.35 205.6 261.35 205.6 261.35 211.6" />
					<line x1="261.35" y1="219.39" x2="261.35" y2="231.08" />
					<polyline points="261.35 234.97 261.35 240.97 267.35 240.97" />
					<line x1="281.25" y1="240.97" x2="302.1" y2="240.97" />
					<polyline points="309.04 240.97 315.04 240.97 315.04 234.97" />
					<line x1="315.04" y1="223.9" x2="315.04" y2="185.15" />
					<line x1="315.04" y1="179.61" x2="315.04" y2="173.61" />

					{/* Group 2 */}
					<line x1="315.04" y1="240.97" x2="315.04" y2="246.97" />
					<polyline points="315.04 258.57 315.04 510.34 331.03 529.8 331.03 548.55" />
					<polyline points="331.03 554.35 331.03 560.35 337.03 560.35" />
					<line x1="349.31" y1="560.35" x2="809.98" y2="560.35" />
					<polyline points="816.12 560.35 822.12 560.35 822.12 554.35" />
					<line x1="822.12" y1="542.22" x2="822.12" y2="232.89" />
					<polyline points="822.12 226.83 822.12 220.83 816.12 220.83" />
					<line x1="804.05" y1="220.83" x2="327.08" y2="220.83" />
					<line x1="321.04" y1="220.83" x2="315.04" y2="220.83" />

					{/* Group 3 */}
					<line x1="822.12" y1="155.25" x2="822.12" y2="161.25" />
					<line x1="822.12" y1="171.96" x2="822.12" y2="209.47" />
					<polyline points="822.12 214.83 822.12 220.83 828.12 220.83" />
					<line x1="841.9" y1="220.83" x2="862.57" y2="220.83" />
					<polyline points="869.46 220.83 875.46 220.83 875.46 212.24" />

					{/* Group 4 */}
					<line x1="875.46" y1="220.83" x2="875.46" y2="226.83" />
					<line x1="875.46" y1="238.14" x2="875.46" y2="300.33" />
					<polyline points="875.46 305.98 875.46 311.98 869.46 311.98" />
					<line x1="855.68" y1="311.98" x2="835.01" y2="311.98" />
					<line x1="828.12" y1="311.98" x2="822.12" y2="311.98" />

					{/* Group 5 */}
					<line x1="512.99" y1="560.35" x2="512.99" y2="554.35" />
					<line x1="512.99" y1="548.17" x2="512.99" y2="538.89" />
					<polyline points="512.99 535.8 512.99 529.8 518.99 529.8" />
					<line x1="530.38" y1="529.8" x2="615.83" y2="529.8" />
					<polyline points="621.53 529.8 627.53 529.8 627.53 535.8" />
					<line x1="627.53" y1="541.98" x2="627.53" y2="551.26" />
					<line x1="627.53" y1="554.35" x2="627.53" y2="560.35" />

					{/* Final single line */}
					<line x1="315.04" y1="443.08" x2="273.83" y2="443.08" />
      </motion.g>

      {/* Selected spot (if any) rendered last */}
      {latestSpot &&
        renderSpot(latestSpot, dMap[latestSpot], latestSpot)}
    </>
  );
}

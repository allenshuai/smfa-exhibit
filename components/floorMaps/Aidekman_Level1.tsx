import { motion } from 'framer-motion';
import React from "react";
import { SpotType } from '../data/allSpots'; 

interface Aidekman_Props {
  renderSpot: (
    id: string,
    d: string,
    type: SpotType,
    latestSpot: string | undefined,
    title?: string
  ) => React.JSX.Element;
  latestSpot: string | undefined;
}

export default function Aidekman({
  renderSpot,
  latestSpot,
}: Aidekman_Props) {
  const dMap: Record<string, { d: string; type: SpotType; title?: string }> = {
		ExhibitM019040: {
      d: 'M505.99 519.3h41.54v94.85h-41.54z',
      type: 'brown',
      title: 'Exhibit M019040',
    },
    ExhibitM019112: {
      d: 'M519.08 616.73v24.99h-24.93v-28.46h-0.01v-67.38h-7.27v-27.57h-33.24v27.57h-7.12v71.91h0.01v28.06h0.01v62.4h114.02v-90.46h-38.54z',
      type: 'brown',
      title: 'Exhibit M019112',
    },
    CorridorM019100H: {
      d: 'M475.26 495.27h72.27v21.55h-72.27z',
      type: 'brown',
      title: 'Corridor M019100H',
    },
    CorridorM019100H3: {
      d: 'M528.31 372.98h19.22v120.19h-19.22z',
      type: 'brown',
      title: 'Corridor M019100H3',
    },
	};

  const nonSelectedSpots = Object.keys(dMap).filter(
    (id) => id !== latestSpot
  );

  return (
    <>
      {/* Base boundary */}
			<g id="AIDEKMAN_L1_Base" fill="#f0ead2">
				<path
					d="M960.73,48.41l-114.17,53.12,13.86,29.4c-13.86-7-29.53-10.95-46.13-10.95-56.21,0-101.84,45.27-102.45,101.34h-38.8v-27.11h-8.11v-1.95h-8.1v1.95h-12.31v-1.95h-8.1v1.95h-12.02v-1.95h-8.1v1.95h-12.74v-1.95h-8.1v1.95h-7.9v28.94h-38.93v3.66h-16.15v-3.66h-6.34v-7.33h2.01v-39.4h-4.27v36.59h-92.99v12.58h-20.03v9.16h-12.44v-1.59h-24.99v-2.56h-36.94v2.56h-26.01v42.62h-168.88v47.5h-62.03v70.03h62.03v3.48h98.54v43.23h92.56v-22.22h15.51v-21h13.68v61.15h40.57l38.32,38.37v181.21h-27.6v72.66h79.62v-40.54h68.08v-245.07h154.4v-62.65h-11.6v-93.17h56.41v84.5h108.92v-84.18c22.56-14.29,39.16-37.14,45.21-63.99l11.08,23.5,113.32-52.87-77.91-167.29Z"
					stroke="#6c584c"
					strokeWidth={1}
				/>
			</g>


      {/* Gray rooms */}
			<motion.g
        id="GrayRooms"
        initial={{ opacity: 0, scale: 0.98 }}
        animate={{ opacity: 1, scale: 1 }}
        transition={{ delay: 0.2, duration: 0.4 }}
      >
        {/* Insert your gray room paths or rects here */}
				<g id="AIDEKMAN_Gray" fill="#c2c1c0">
					<path id="granoff" d="M959.63,54.95l-107.61,50.07,18.09,38.37c-15.81-11.29-35.17-17.94-56.09-17.94-53.07,0-96.14,42.8-96.6,95.76h-.01v82.99h45.71v83.78h101.95v-84.08c25.68-15.97,43.12-43.42,45.31-75.08l15.87,33.65,106.81-49.84-73.43-157.68Z"><title>granoff</title></path>
					<polygon id="Lounge" points="415.27 260.33 432.66 260.33 432.66 285.94 432.66 297.19 523.82 297.19 523.82 215.82 432.66 215.82 432.66 236.58 400.14 236.58 400.14 285.94 415.27 285.94 415.27 260.33"><title>Lounge</title></polygon>
					<polygon id="office2" points="572.93 317.42 549.83 317.42 549.83 401.91 584.67 401.91 572.93 317.42"><title>office2</title></polygon>
					<polygon id="office3" points="700.72 401.91 700.72 289.84 691.07 289.84 675.5 401.91 700.72 401.91"><title>office3</title></polygon>
					<polygon id="audi" points="675.5 422.58 672.04 422.58 672.04 421.45 672.04 404.12 672.04 402.79 687.73 289.84 687.73 289.84 663.61 287.09 663.61 265.35 596.36 265.35 596.36 287.09 572.23 289.84 572.23 289.84 587.92 402.79 587.92 404.12 587.92 421.45 587.92 422.58 584.67 422.58 584.67 404.36 549.83 404.36 549.83 422.58 549.83 431.68 549.83 462.12 712.74 462.12 712.74 431.22 712.74 422.58 712.74 404.36 675.5 404.36 675.5 422.58"><title>audi</title></polygon>
					<rect id="stair3" x="556.93" y="225.03" width="33.14" height="14.75"><title>stair3</title></rect>
					<rect id="stair2" x="670" y="225.03" width="36.87" height="14.75"><title>stair2</title></rect>
					<polygon id="bathroom3" points="587.66 260.15 587.66 255.5 549.83 255.5 549.83 274.62 549.83 280.45 549.83 282.98 549.83 288.64 549.83 311.41 560.74 311.41 570.16 311.41 572.1 311.41 570.16 297.47 570.16 288.64 570.16 282.98 570.16 280.45 587.66 280.45 587.66 273.95 594.58 273.95 594.58 260.15 587.66 260.15"><title>bathroom</title></polygon>
					<rect id="stair4" x="492.63" y="539.16" width="16.18" height="37.44"><title>stair4</title></rect>
					<rect id="office1" x="670" y="242.28" width="36.87" height="40.7"><title>office1</title></rect>
					<polygon id="office" points="440.79 701.86 440.79 696.45 440.79 680.66 416.29 680.66 416.29 696.45 416.29 701.86 416.29 747.12 429.55 747.12 440.79 747.12 489.94 747.12 489.94 709.63 440.79 709.63 440.79 701.86"><title>office</title></polygon>
					<rect id="stair_5" x="492.63" y="616.73" width="24.74" height="23.58"><title>stair_5</title></rect>
					<polygon id="theatre" points="435.74 345.98 435.74 358.34 413.19 358.34 413.19 381.79 403.37 402.58 402.5 404.43 402.5 454.78 441.19 492.91 450.72 492.91 450.72 516.82 473.09 516.82 473.09 492.91 497.3 492.91 525.91 464.42 526.02 372.98 499.05 345.98 435.74 345.98"><title>theatre</title></polygon>
					<polygon id="jackson" points="407.92 298.73 400.16 298.73 397.21 298.73 397.21 235.27 312.8 235.27 312.8 278.46 144.25 278.46 144.25 325.52 82.01 325.52 82.01 390.71 144.25 390.71 144.25 393.98 243.24 393.98 243.24 437.48 330.5 437.48 330.5 415.63 346.08 415.63 346.08 393.12 354.7 393.12 354.7 381.79 364.29 381.79 364.29 400.8 364.29 400.8 364.29 454.78 377.2 454.78 379.06 454.78 387.64 454.78 397.31 454.78 399.36 454.78 399.36 403.61 410.31 380.44 410.31 298.73 407.92 298.73"><title>jackson</title></polygon>
				</g>

			</motion.g>

			{/* Green interactive spots */}
			<motion.g
        id="GreenSpots"
        initial={{ opacity: 0, scale: 0.95 }}
        animate={{ opacity: 1, scale: 1 }}
        transition={{ delay: 0.5, duration: 0.4 }}
      >
 				{nonSelectedSpots.map((id) => {
          const { d, type, title } = dMap[id];
          return renderSpot(id, d, type, latestSpot, title);
        })}			
			</motion.g>


      {/* Decorative Elements */}
			<motion.g
        id="Decorations"
        initial={{ opacity: 0, y: 10 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ delay: 0.8, duration: 0.4 }}
      >
				<g id="Decorations" stroke="#545554" fill="none">

					
					{/* --- Bathroom1 --- */}
					<g id="Bathroom1" stroke="#545554" fill="none">
						<path
							d="M563.02,268.81c-.28,0-.56,0-.83,0-.93-.01-1.76-.82-1.79-1.75-.01-.31.05-.39.36-.39.44,0,.88,0,1.32,0,.01,0,.03,0,.08-.02-1.08-.75-1.71-1.76-1.75-3.08-.05-1.32.47-2.39,1.51-3.18,1.48-1.14,3.65-.93,4.91.46.79.87,1.11,1.9.97,3.07-.15,1.17-.75,2.06-1.69,2.76.4,0,.8.01,1.21,0,.51-.02.59.08.48.62-.18.92-.92,1.52-1.85,1.53-.24,0-.49,0-.75,0,.06.65.11,1.27.16,1.9.07.82.15,1.64.22,2.46.03.3.06.59.08.89,0,.13.05.17.18.17.52,0,1.04,0,1.56,0,.8,0,1.61,0,2.41,0,.07,0,.13,0,.21,0,.13-.77.24-1.54.38-2.3.03-.15-.07-.17-.15-.21-.84-.51-1.3-1.27-1.32-2.26,0-.3.04-.6,0-.91-.04-.37.22-.65.65-.79-.11-.17-.23-.33-.33-.5-.23-.36-.33-.76-.33-1.19,0-.59,0-1.19,0-1.78,0-.51.32-.84.82-.84,1.23,0,2.46,0,3.69,0,.45,0,.78.33.79.79,0,.61,0,1.23,0,1.84,0,.59-.21,1.1-.58,1.56-.03.04-.05.07-.08.11.12.07.25.11.35.19.29.21.38.59.25.94-.02.06-.06.14-.03.18.16.32.09.63.02.95-.18.75-.61,1.32-1.27,1.71-.12.07-.16.14-.13.27.12.68.24,1.37.34,2.05.03.17.1.2.24.2.36,0,.72,0,1.08,0,.1,0,.22.04.29.1.14.13.05.37-.14.41-.06.01-.13.01-.2.01-4.67,0-9.34,0-14.01,0-.09,0-.19.02-.26-.02-.09-.05-.19-.13-.21-.22-.03-.12.04-.24.18-.26.08-.01.16-.02.24-.02.69,0,1.37,0,2.06,0,.15,0,.2-.03.22-.2.13-1.57.28-3.14.42-4.71.01-.15.02-.31.03-.5ZM563.85,266.63c0-.09,0-.18,0-.26,0-.53,0-1.07.03-1.6.04-.49.47-.83.96-.8.46.02.85.42.86.9,0,.13,0,.26,0,.38,0,.2-.1.32-.26.32-.16,0-.25-.11-.26-.32,0-.15,0-.31-.03-.46-.04-.19-.22-.31-.4-.31-.19,0-.35.16-.38.35-.01.07-.01.13-.01.2,0,.47,0,.94,0,1.42,0,.06.01.12.02.19.12-.03.27.05.26-.17,0-.17.04-.33.25-.35.21-.01.25.13.28.3,0,.01.02.02.02.03,1.25-.41,2.36-1.85,2.07-3.59-.27-1.58-1.68-2.79-3.4-2.69-1.49.09-2.81,1.36-2.95,2.95-.15,1.74,1.04,3.01,2.11,3.32.03-.16.07-.33.28-.32.33.01.21.32.29.49h.24ZM571.56,263.95c-.58,0-1.17,0-1.75,0-.29,0-.38.09-.38.38,0,.5.02,1,0,1.5-.04.77.28,1.35.84,1.83.05.05.14.08.21.08.63,0,1.26-.02,1.89,0,.32.01.54-.09.76-.33.38-.42.59-.88.58-1.45,0-.55,0-1.1,0-1.66,0-.26-.09-.35-.34-.36-.6,0-1.2,0-1.79,0ZM563.55,268.82c-.16,1.8-.32,3.59-.48,5.37h2.09c-.16-1.8-.32-3.58-.48-5.37h-1.13ZM573.7,269.37s-.06-.03-.07-.03c-1.36,0-2.71,0-4.07,0-.14,0-.15.07-.14.18.14,1.59,1.82,2.5,3.19,1.71.7-.4,1.04-1.04,1.08-1.86ZM560.94,267.2c.03.09.04.17.07.24.25.57.7.85,1.31.85.87,0,1.74.01,2.61,0,.44,0,.88,0,1.31-.05.52-.06.98-.56,1.02-1.05h-6.32ZM572.58,274.2c-.12-.75-.24-1.48-.36-2.19h-1.33c-.12.71-.24,1.44-.36,2.19h2.04ZM571.57,268.82c.29,0,.57,0,.86,0,.33,0,.66,0,1,0,.16,0,.26-.1.27-.26,0-.16-.08-.25-.23-.28-.08-.01-.16-.02-.24-.02-.47,0-.94,0-1.41,0-.67,0-1.34,0-2.01,0-.24,0-.38.11-.38.29,0,.17.14.27.37.27.59,0,1.18,0,1.77,0Z"
						/>
					</g>

					{/* --- Stair1 --- */}
					<g id="Stair1" stroke="#545554" fill="none">
						<rect x="484.3" y="550.37" width="32.77" height="13.62" transform="rotate(90 500.685 557.18)" />
						<g>
							{["545.88", "548.68", "551.49", "554.29", "557.1", "559.9", "562.71", "565.52", "568.32"].map((y) => (
								<line key={y} x1="507.56" y1={y} x2="493.95" y2={y} />
							))}
						</g>
						<g>
							<line x1="503.29" y1="545.39" x2="503.29" y2="572.43" />
							<polygon points="503.31 541.47 505.26 545.39 501.35 545.39 503.31 541.47" />
							<line x1="496.85" y1="569.07" x2="496.85" y2="542.03" />
							<polygon points="496.86 572.99 498.82 569.07 494.9 569.07 496.86 572.99" />
						</g>
					</g>

					{/* --- BigStair --- */}
					<g id="BigStair" stroke="#545554" fill="none">
						<g id="Stair1-2">
							<rect x="493.79" y="623.51" width="22.42" height="9.31" transform="rotate(180 505.00 628.165)" />
							<g>
								{["512.73", "510.81", "508.89", "506.97", "505.05", "503.13", "501.21", "499.29", "497.37"].map((x) => (
									<line key={x} x1={x} y1="632.88" x2={x} y2="623.57" />
								))}
							</g>
							<g>
								<line x1="513.06" y1="629.96" x2="494.56" y2="629.96" />
								<polygon points="515.74 629.97 513.06 631.31 513.06 628.63 515.74 629.97" />
								<line x1="496.86" y1="625.55" x2="515.35" y2="625.55" />
								<polygon points="494.18 625.56 496.86 626.9 496.86 624.22 494.18 625.56" />
							</g>
						</g>
						<g>
							<path d="M509.63,622.85v-5.74h-9.31v5.74h9.31ZM506.77,617.58l1.34,2.68h-2.68l1.34-2.68Z" />
							<path d="M509.63,633.68h-9.31v5.84h9.31v-5.84ZM502.36,639.14l-1.34-2.68h2.68l-1.34,2.68Z" />
						</g>
					</g>

					{/* --- Stair1-3 --- */}
					<g id="Stair1-3" stroke="#545554" fill="none">
						<rect x="558.59" y="226.16" width="30.24" height="12.57" />
						<g>
							{["563.28", "565.87", "568.46", "571.05", "573.64", "576.23", "578.82", "581.41", "584"].map((x) => (
								<line key={x} x1={x} y1="226.09" x2={x} y2="238.66" />
							))}
						</g>
						<g>
							<line x1="562.83" y1="230.03" x2="587.79" y2="230.03" />
							<polygon points="559.22 230.02 562.83 228.21 562.83 231.83 559.22 230.02" />
							<line x1="584.69" y1="235.98" x2="559.74" y2="235.98" />
							<polygon points="588.31 235.97 584.69 234.16 584.69 237.78 588.31 235.97" />
						</g>
					</g>

					{/* --- Stair1-4 --- */}
					<g id="Stair1-4" stroke="#545554" fill="none">
						<rect x="673.32" y="226.16" width="30.24" height="12.57" />
						<g>
							{["678.01", "680.6", "683.19", "685.78", "688.37", "690.96", "693.55", "696.14", "698.73"].map((x) => (
								<line key={x} x1={x} y1="226.09" x2={x} y2="238.66" />
							))}
						</g>
						<g>
							<line x1="677.56" y1="230.03" x2="702.52" y2="230.03" />
							<polygon points="673.94 230.02 677.56 228.21 677.56 231.83 673.94 230.02" />
							<line x1="699.42" y1="235.98" x2="674.46" y2="235.98" />
							<polygon points="703.03 235.97 699.42 234.16 699.42 237.78 703.03 235.97" />
						</g>
					</g>
				</g>
			</motion.g>

			{/* --- Dashed Navigation Paths --- */}
			<motion.g
        id="Level2_Path"
        stroke="#545554"
        strokeWidth={1}
        strokeDasharray="10 6"
				fill="none"
        opacity={0.65}
        initial={{ strokeDashoffset: 80, opacity: 0 }}
				animate={{ strokeDashoffset: 0, opacity: 1 }}
				transition={{ delay: 1.2, duration: 1.2, ease: 'easeInOut' }}
      >
				<line x1="539.36" y1="176.65" x2="539.36" y2="182.65" />
				<polyline points="539.36 194.44 539.36 267.1 539.36 494.94" />
				<polyline points="539.36 500.83 539.36 506.83 533.36 506.83" />
				<line x1="523.07" y1="506.83" x2="507.63" y2="506.83" />
				<polyline points="502.48 506.83 496.48 506.83 496.48 512.83" />
				<polyline points="496.48 524.76 496.48 530.76 489.94 530.76" />

				<line x1="539.36" y1="316.22" x2="533.36" y2="316.22" />
				<line x1="521.95" y1="316.22" x2="436.36" y2="316.22" />
				<polyline points="430.66 316.22 424.66 316.22 424.66 322.22" />
				<line x1="424.66" y1="326.43" x2="424.66" y2="332.43" />

				<line x1="424.66" y1="316.22" x2="424.66" y2="310.22" />
				<line x1="424.66" y1="298.75" x2="424.66" y2="281.55" />
				<line x1="424.66" y1="275.82" x2="424.66" y2="269.82" />

				<line x1="424.66" y1="291.41" x2="418.66" y2="291.41" />
				<line x1="409.06" y1="291.41" x2="403.06" y2="291.41" />

				<line x1="539.36" y1="247.68" x2="545.36" y2="247.68" />
				<line x1="556.73" y1="247.68" x2="619.25" y2="247.68" />
				<polyline points="624.93 247.68 630.93 247.68 630.93 241.68" />
				<line x1="630.93" y1="231.68" x2="630.93" y2="196.66" />
				<line x1="630.93" y1="191.66" x2="630.93" y2="185.66" />

				<line x1="650.93" y1="185.66" x2="650.93" y2="191.66" />
				<line x1="650.93" y1="203.24" x2="650.93" y2="220.62" />
				<polyline points="650.93 226.41 650.93 232.41 656.93 232.41" />
				<line x1="658.54" y1="232.41" x2="664.54" y2="232.41" />

				<polyline points="609.94 185.66 609.94 232.41 595.46 232.41" />
			</motion.g>

			{latestSpot && dMap[latestSpot] && (() => {
        const { d, type, title } = dMap[latestSpot];
        return renderSpot(latestSpot, d, type, latestSpot, title);
      })()}
    </>
  );
}

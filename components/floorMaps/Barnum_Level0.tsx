import { motion } from 'framer-motion';
import React from "react";
import { SpotType } from '../data/allSpots'; 

interface Barnum_Level0Props {
  renderSpot: (
    id: string,
    d: string,
    type: SpotType,
    latestSpot: string | undefined,
    title?: string
  ) => React.JSX.Element;
  latestSpot: string | undefined;
}

export default function Barnum_Level0({
  renderSpot,
  latestSpot,
}: Barnum_Level0Props) {
  const dMap: Record<string, { d: string; type: SpotType; title?: string }> = {
		CorridorLLH0: {
      d: 'M464.09 357.01h262.79v18.77H464.09z',
      type: 'green',
      title: 'Corridor LLH0',
    },
    CorridorLLH1: {
      d: 'M703.01 375.78h23.87v233.19H703.01z',
      type: 'green',
      title: 'Corridor LLH1',
    },
	};

  const nonSelectedSpots = Object.keys(dMap).filter(
    (id) => id !== latestSpot
  );

  return (
    <>
      {/* Base boundary */}
			<g id="BARNUM_L0_Base" fill="#f0ead2">
				<path
					d="M987.43 366.79 964.99 366.79 964.99 313.15 729.07 313.15 729.07 321.43 693.43 321.43 693.43 303.07 619.63 303.07 619.63 272.35 537.07 272.35 537.07 303.07 457.63 303.07 457.63 251.11 457.63 182.6 457.63 66.43 151.99 66.43 151.99 251.11 195.43 251.11 195.43 334.14 186.43 334.14 186.43 558.31 343.03 558.31 343.03 596.35 418.75 596.35 418.75 634.15 407.59 634.15 407.59 700.63 484.39 700.63 484.39 718.75 671.47 718.75 671.47 700.63 748.87 700.63 748.87 634.15 733.24 634.15 733.24 599.35 945.31 599.35 945.31 577.94 964.99 577.94 964.99 523.99 987.43 523.99 987.43 366.79Z"
					stroke="#6c584c"
					strokeWidth={1}
				/>
			</g>


      {/* Gray rooms */}
			<motion.g
        id="GrayRooms"
        initial={{ opacity: 0, scale: 0.98 }}
        animate={{ opacity: 1, scale: 1 }}
        transition={{ delay: 0.2, duration: 0.4 }}
      >
				<g id="BARNUM_L0_Gray" fill="#c2c1c0">
  				<polygon id="LL26" points="288.71 456.08 288.71 427.67 195.86 427.67 195.86 548.63 316.83 548.63 316.83 456.08 288.71 456.08"><title>LL26</title></polygon>
					<rect id="office" x="195.86" y="341.35" width="235.72" height="80"><title>office</title></rect>
					<polygon id="LL08" points="464.09 380.11 464.09 608.43 533.45 632.87 543.79 632.87 543.79 623.94 570.46 623.94 570.46 632.87 591.18 632.87 591.18 623.94 617.85 623.94 617.85 632.87 628.24 632.87 698.92 608.43 698.92 380.11 464.09 380.11"><title>LL08</title></polygon>
					<polygon id="utilities" points="686.23 327.72 686.23 310.63 610.63 310.63 610.63 280.69 545.23 280.69 545.23 310.63 464.09 310.63 464.09 352.03 651.58 352.03 686.23 352.03 729.07 352.03 729.07 327.72 686.23 327.72"><title>utilities</title></polygon>
					<rect id="bath" x="735.52" y="466.03" width="81.2" height="104.26"><title>bath</title></rect>
					<polygon id="LL01" points="849.74 321.43 849.74 466.03 821.74 466.03 821.74 570.29 849.74 570.29 908.12 570.29 956.75 570.29 956.75 321.43 849.74 321.43"><title>LL01</title></polygon>
					<rect id="LL06" x="735.52" y="321.43" width="108.92" height="104.28"><title>LL06</title></rect>
					<rect id="office2" x="344.31" y="456.08" width="70.9" height="92.55"><title>office2</title></rect>
					<rect id="store" x="414.33" y="640.25" width="57.25" height="54.17"><title>store</title></rect>
					<rect id="store2" x="693.43" y="640.25" width="50.14" height="54.17"><title>store2</title></rect>
					<rect id="stairs" x="421.44" y="518.49" width="37.38" height="77.61"><title>stairs</title></rect>
					<rect id="eleavtor" x="421.44" y="456.08" width="36.46" height="40.67"><title>eleavtor</title></rect>
					<polygon id="LLWings" points="160.53 75.18 160.53 134.93 160.57 134.93 160.57 143.1 160.53 143.1 160.53 243.01 203.41 243.01 203.41 333.91 448.65 333.91 448.65 311.35 448.65 204.23 448.65 199.88 448.65 193.05 448.65 134.93 448.65 106.03 448.65 75.18 160.53 75.18"><title>LLWings</title></polygon>
				</g>
			</motion.g>

			{/* Green interactive spots */}
			<motion.g
        id="GreenSpots"
        initial={{ opacity: 0, scale: 0.95 }}
        animate={{ opacity: 1, scale: 1 }}
        transition={{ delay: 0.5, duration: 0.4 }}
      >
  		 {nonSelectedSpots.map((id) => {
          const { d, type, title } = dMap[id];
          return renderSpot(id, d, type, latestSpot, title);
        })}			
			</motion.g>


      {/* Decorative Elements */}
			<motion.g
        id="Decorations"
        initial={{ opacity: 0, y: 10 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ delay: 0.8, duration: 0.4 }}
      >
				<g id="Decorations" stroke="#545554" fill="none">
					{/* --- Bathroom --- */}
					<g id="Bathroom" stroke="#545554" fill="none">
						<path
    					d="M768.59,523.52c-.64,0-1.26,0-1.87,0-2.11-.03-3.98-1.85-4.06-3.96-.03-.71.12-.87.81-.88.99,0,1.98,0,2.98,0,.03,0,.06-.01.18-.05-2.44-1.71-3.86-3.97-3.96-6.96-.1-2.98,1.06-5.39,3.4-7.19,3.33-2.57,8.25-2.11,11.11,1.04,1.78,1.96,2.52,4.29,2.19,6.94-.33,2.64-1.7,4.65-3.82,6.23.91,0,1.82.03,2.73,0,1.15-.05,1.33.19,1.09,1.39-.41,2.09-2.08,3.44-4.17,3.45-.55,0-1.1,0-1.69,0,.13,1.47.25,2.88.37,4.28.17,1.85.34,3.7.51,5.55.06.67.14,1.33.17,2,.02.3.12.39.41.38,1.17-.01,2.35,0,3.52,0,1.82,0,3.64,0,5.46,0,.15,0,.29-.01.47-.02.28-1.75.55-3.48.85-5.2.06-.34-.17-.38-.34-.49-1.89-1.16-2.94-2.86-2.98-5.1-.01-.68.08-1.35,0-2.05-.1-.83.5-1.46,1.47-1.78-.25-.38-.52-.74-.75-1.12-.51-.82-.74-1.73-.74-2.69,0-1.34,0-2.68,0-4.02,0-1.15.72-1.9,1.85-1.9,2.78,0,5.56,0,8.34,0,1.02,0,1.77.74,1.78,1.78.02,1.39,0,2.77,0,4.16,0,1.34-.47,2.5-1.3,3.52-.06.08-.12.16-.19.25.28.15.56.25.8.43.65.48.85,1.33.56,2.13-.05.13-.13.31-.07.41.37.71.2,1.43.03,2.14-.4,1.7-1.37,2.99-2.87,3.86-.27.16-.35.32-.3.61.27,1.54.54,3.09.77,4.63.06.39.21.46.55.45.81-.02,1.62-.02,2.43,0,.22,0,.49.09.65.23.31.3.11.83-.31.92-.14.03-.3.03-.45.03-10.55,0-21.11,0-31.66,0-.2,0-.42.05-.58-.03-.2-.11-.42-.3-.48-.51-.07-.28.09-.54.41-.6.18-.03.36-.05.54-.05,1.55,0,3.1,0,4.65,0,.33,0,.46-.07.49-.44.3-3.55.64-7.1.96-10.65.03-.35.04-.7.07-1.13ZM770.46,518.59c0-.21,0-.4,0-.6.02-1.2-.02-2.41.07-3.61.08-1.1,1.07-1.87,2.17-1.81,1.04.05,1.91.95,1.95,2.03.01.29,0,.58,0,.87,0,.45-.23.72-.58.72-.36,0-.57-.25-.58-.71-.01-.35,0-.71-.06-1.04-.08-.42-.5-.71-.9-.69-.43.02-.79.36-.86.79-.02.15-.03.3-.03.46,0,1.07,0,2.13,0,3.2,0,.13.03.26.04.43.27-.06.6.11.59-.38-.01-.39.08-.75.56-.78.46-.03.57.3.63.67,0,.02.04.04.05.07,2.82-.92,5.33-4.17,4.67-8.12-.6-3.58-3.8-6.3-7.68-6.08-3.36.2-6.35,3.08-6.66,6.67-.34,3.94,2.36,6.8,4.77,7.51.07-.37.17-.75.64-.73.74.03.47.71.65,1.12h.55ZM787.89,512.54c-1.32,0-2.64,0-3.96,0-.66,0-.87.2-.87.87,0,1.13.04,2.26-.01,3.38-.08,1.73.64,3.05,1.89,4.13.12.11.32.18.48.18,1.42.01,2.85-.04,4.27.02.73.03,1.23-.21,1.71-.74.86-.94,1.34-2,1.32-3.29-.02-1.25,0-2.5,0-3.75,0-.58-.21-.8-.78-.8-1.35,0-2.7,0-4.05,0ZM769.78,523.55c-.36,4.08-.73,8.11-1.09,12.15h4.73c-.37-4.07-.73-8.1-1.09-12.15h-2.55ZM792.73,524.8c-.1-.04-.13-.06-.16-.06-3.06,0-6.13,0-9.19-.01-.31,0-.33.16-.31.41.31,3.6,4.12,5.66,7.21,3.87,1.58-.91,2.36-2.35,2.45-4.2ZM763.89,519.88c.06.2.09.38.16.54.57,1.29,1.57,1.91,2.95,1.92,1.97.01,3.93.02,5.9.01.99,0,1.98.01,2.96-.1,1.18-.14,2.22-1.27,2.31-2.37h-14.28ZM790.2,535.7c-.28-1.7-.55-3.35-.81-4.94h-3c-.26,1.6-.53,3.26-.81,4.94h4.62ZM787.92,523.55c.65,0,1.29,0,1.94,0,.75,0,1.5,0,2.25,0,.37,0,.59-.23.61-.6.02-.35-.18-.57-.53-.63-.18-.03-.36-.04-.54-.04-1.06,0-2.13,0-3.19,0-1.51,0-3.02,0-4.54,0-.55,0-.86.25-.86.66,0,.38.32.61.84.61,1.34,0,2.67,0,4.01,0Z"
						/>
					</g>

					{/* --- Stair1 --- */}
					<g id="Stair" stroke="#545554" fill="none">
						<rect x="404.52" y="543.09" width="71.39" height="29.67" transform="translate(-117.71 998.14) rotate(-90)" />
				
						<g>
							<line x1="425.22" y1="582.54" x2="454.88" y2="582.54" />
							<line x1="425.22" y1="576.43" x2="454.88" y2="576.43" />
							<line x1="425.22" y1="570.32" x2="454.88" y2="570.32" />
							<line x1="425.22" y1="564.2" x2="454.88" y2="564.2" />
							<line x1="425.22" y1="558.09" x2="454.88" y2="558.09" />
							<line x1="425.22" y1="551.98" x2="454.88" y2="551.98" />
							<line x1="425.22" y1="545.86" x2="454.88" y2="545.86" />
							<line x1="425.22" y1="539.75" x2="454.88" y2="539.75" />
							<line x1="425.22" y1="533.64" x2="454.88" y2="533.64" />
						</g>

						{/* Directional Arrows */}
						<g>
							{/* Upward arrow */}
							<g>
								<line x1="434.52" y1="583.61" x2="434.52" y2="524.68" />
								<polygon
									points="434.49 592.14 430.23 583.61 438.76 583.61"
									fill="#545554"
								/>
							</g>

							{/* Downward arrow */}
							<g>
								<line x1="448.57" y1="532" x2="448.57" y2="590.92" />
								<polygon
									points="448.54 523.46 444.27 532 452.81 532"
									fill="#545554"
								/>
							</g>
						</g>
					</g>


					{/* --- Elevator --- */}
					<g id="Elevator" stroke="#545554" fill="none">
						<title>Elevator</title>
						<path d="M431.08,464.76c0-.1,0-.18,0-.25,0-.59,0-1.17,0-1.76,0-.29.12-.4.42-.4,3.63,0,7.26,0,10.9,0,.31,0,.43.11.43.41,0,.66,0,1.31,0,2,.11,0,.2,0,.3,0,3.8,0,7.61,0,11.41,0,.44,0,.52.07.52.49,0,8.25,0,16.5,0,24.74,0,.42-.08.5-.52.5-8.71,0-17.42,0-26.13,0-.91,0-1.81,0-2.72,0-.37,0-.47-.09-.47-.43,0-8.29,0-16.58,0-24.87,0-.34.09-.43.45-.43,1.69,0,3.37,0,5.06,0,.1,0,.21,0,.35,0ZM427.61,489.88v-.36c0-7.29,0-14.57,0-21.86,0-.11,0-.21,0-.32,0-.19.11-.3.32-.31.12,0,.24,0,.36,0,5.78,0,11.56,0,17.35,0,.64,0,.65,0,.65.62,0,7.32,0,14.63,0,21.95q0,.32.34.32c2.48,0,4.96,0,7.44,0q.36,0,.36-.33c0-7.98,0-15.96,0-23.94q0-.28-.29-.28c-4.01,0-8.01,0-12.02,0-5.32,0-10.63,0-15.95,0-.1,0-.2,0-.32,0v24.53h1.76ZM428.25,467.61c0,.11-.01.19-.01.27,0,7.24,0,14.49,0,21.73,0,.29,0,.29.32.29,2.58,0,5.17,0,7.75,0q.33,0,.33-.31c0-7.24,0-14.47,0-21.71,0-.21-.05-.27-.28-.27-2.61,0-5.23,0-7.84,0-.08,0-.16,0-.27,0ZM437.26,489.88c.13,0,.24.02.35.02,2.58,0,5.17,0,7.75,0,.3,0,.3,0,.3-.29,0-7.24,0-14.49,0-21.73,0-.22-.07-.27-.29-.27-2.61,0-5.21,0-7.82,0-.3,0-.3,0-.3.29,0,7.24,0,14.47,0,21.71,0,.08,0,.17,0,.27ZM431.73,464.74h10.44v-1.78h-10.44v1.78Z" />
						<path d="M450.36,477.18c-.62,0-1.24,0-1.86,0-.17,0-.33-.02-.41-.2-.07-.17.03-.28.14-.39.6-.57,1.2-1.14,1.81-1.7.25-.24.38-.24.64,0,.61.57,1.22,1.15,1.82,1.72.11.1.2.21.12.37-.07.15-.2.19-.36.19-.64,0-1.27,0-1.91,0ZM450.39,475.5c-.4.37-.78.72-1.15,1.07h2.27c-.4-.38-.77-.74-1.12-1.07Z" />
						<path d="M450.36,479.33c.63,0,1.26,0,1.89,0,.16,0,.33.02.36.18.02.12-.02.29-.11.37-.61.6-1.24,1.18-1.87,1.77-.2.19-.36.18-.56,0-.62-.58-1.24-1.17-1.86-1.75-.11-.1-.2-.21-.13-.37.08-.16.22-.19.39-.19.63,0,1.26,0,1.89,0ZM450.37,481c.36-.34.74-.7,1.13-1.07h-2.27c.38.36.76.72,1.14,1.07Z" />
					</g>
				</g>
			</motion.g>

			{/* --- Dashed Navigation Paths --- */}
			<motion.g
        id="Level2_Path"
        stroke="#545554"
        strokeWidth={1}
        strokeDasharray="10 6"
				fill="none"
        opacity={0.65}
        initial={{ strokeDashoffset: 80, opacity: 0 }}
				animate={{ strokeDashoffset: 0, opacity: 1 }}
				transition={{ delay: 1.2, duration: 1.2, ease: 'easeInOut' }}
      >
				<line x1="387.17" y1="620.1" x2="393.17" y2="620.1" />
				<polyline points="404.99 620.1 464.84 620.1 533.45 665.9 628.24 665.9 706.38 625.57" />
				<polyline points="711.64 622.85 716.97 620.1 716.97 614.1" />
				<line x1="716.97" y1="602.59" x2="716.97" y2="378.15" />
				<polyline points="716.97 372.4 716.97 366.4 710.97 366.4" />
				<line x1="698.63" y1="366.4" x2="458.03" y2="366.4" />
				<polyline points="451.86 366.4 445.86 366.4 445.86 360.4" />
				<line x1="445.86" y1="352.71" x2="445.86" y2="346.71" />
				<line x1="557.2" y1="665.9" x2="557.2" y2="628.51" />
				<line x1="605.26" y1="665.9" x2="605.26" y2="629.68" />
				<line x1="716.97" y1="620.1" x2="748.87" y2="620.1" />
				<polyline points="716.97 437.59 716.97 445.39 839.59 445.39" />
				<polyline points="445.86 366.4 445.86 437.59 329.09 437.59 306.2 437.59" />
				<polyline points="330.86 514.19 330.86 437.59 338.34 437.59" />
			</motion.g>

		  {latestSpot && dMap[latestSpot] && (() => {
        const { d, type, title } = dMap[latestSpot];
        return renderSpot(latestSpot, d, type, latestSpot, title);
      })()}
    </>
  );
}

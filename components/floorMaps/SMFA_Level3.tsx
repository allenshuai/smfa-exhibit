import { motion } from 'framer-motion';
import React from "react";
import { SpotType } from '../data/allSpots'; 

interface SMFA_Level3Props {
  renderSpot: (
    id: string,
    d: string,
    type: SpotType,
    latestSpot: string | undefined,
    title?: string
  ) => React.JSX.Element;
  latestSpot: string | undefined;
}

export default function SMFA_Level2({
  renderSpot,
  latestSpot,
}: SMFA_Level3Props) {
  const dMap: Record<string, { d: string; type: SpotType; title?: string }> = {
	CorridorA300C2: {
      d: 'M361.68 287.14h274.56v21.85h-274.56z',
      type: 'green',
      title: 'Annalee Gallery I',
    },
    CorridorA300C3: {
  d: 'M639.84 287.14 639.84 308.98 722.38 308.98 722.38 290.65 783.53 290.65 783.53 308.98 821.56 308.98 821.56 287.14 639.84 287.14',
  type: 'green',
  title: 'Annalee Gallery II',
},

DarinGallery: {
  d: 'M725.51 293.71h54.92v15.28h-54.92z',
  type: 'green',
  title: 'Darin Gallery',
},


    CorridorA300C4: {
      d: 'M823.98 287.14h30.35v25.26h-30.35z',
      type: 'green',
      title: 'Annalee Gallery Corner',
    },
    CorridorB300C1: {
      d: 'M471.01 506.03h120.91v25.32h-120.91z',
      type: 'orange',
      title: 'Corridor B300C1',
    },
    CorridorB300C2: {
      d: 'M597.19 506.03h259.7v25.32h-259.7z',
      type: 'orange',
      title: 'Corridor B300C2',
    },
  };

  const nonSelectedSpots = Object.keys(dMap).filter(
    (id) => id !== latestSpot
  );

  return (
    <>
      {/* Base boundary */}
      <g id="SMFA_F3_Base" fill="#f0ead2">
				<path
					d="M525.88,501.07v-39.99l16.5,16.78c8.55,8.61,22.46,8.67,31.07.12,8.61-8.55,8.67-22.46.12-31.07l-47.69-48.07v-86.26h294.94v5.83h111.77V78.8h-111.77v5.9h-458.08v-5.96h-111.96v239h111.96v-5.15h140.82v188.48h-253.52v205.36h682.74v-205.36h-406.9Z"
					stroke="#6c584c"
					strokeWidth={1}
				/>
			</g>


      {/* Gray rooms */}
			<motion.g
        id="GrayRooms"
        initial={{ opacity: 0, scale: 0.98 }}
        animate={{ opacity: 1, scale: 1 }}
        transition={{ delay: 0.2, duration: 0.4 }}
      >
        {/* Insert your gray room paths or rects here */}
				<g id="SMFA_Level3_Gray" fill="#c2c1c0">
					<polygon points="357.71 83.28 257.22 83.28 257.22 274.4 257.22 296.14 257.22 314.01 286.65 314.01 286.65 296.14 357.71 296.14 357.71 83.28"><title>A304</title></polygon>
					<rect x="288.82" y="298.06" width="45.86" height="16.14"><title>A300S1</title></rect>
					<rect x="361.68" y="184.18" width="89.56" height="100.6"><title>A306</title></rect>
					<rect x="453.39" y="184.18" width="91.5" height="100.6"><title>A308</title></rect>
					<rect x="545.66" y="184.18" width="90.59" height="100.6"><title>A310</title></rect>
					<rect x="638.42" y="184.18" width="91.73" height="100.6"><title>A312</title></rect>
					<rect x="731.33" y="184.18" width="90.24" height="100.6"><title>A314</title></rect>
					<rect x="825.01" y="83.27" width="104.11" height="96"><title>A316</title></rect>
					<rect x="858.98" y="181.51" width="70.14" height="34.85"><title>A300S2</title></rect>
					<rect x="858.98" y="219.51" width="28.88" height="32.5"><title>A300E</title></rect>
					<polygon points="890.65 219.51 890.65 254.78 874.19 254.78 874.19 275.92 857.19 275.92 857.19 312.4 890.65 312.4 891.5 312.4 925.89 312.4 925.89 219.51 890.65 219.51"><title>A317</title></polygon>
					<rect x="254.13" y="504.91" width="144.6" height="197.23"><title>B301</title></rect>
					<rect x="403.76" y="535.4" width="75.78" height="166.75"><title>B303</title></rect>
					<rect x="485.04" y="535.4" width="101.43" height="166.75"><title>B305</title></rect>
					<rect x="591.92" y="535.4" width="106.93" height="166.75"><title>B307</title></rect>
					<rect x="703.34" y="535.4" width="106.93" height="166.75"><title>B309</title></rect>
					<rect x="814.96" y="535.4" width="110.8" height="166.75"><title>B311</title></rect>
					<rect x="860.42" y="506.03" width="65.34" height="25.32"><title>B300S3</title></rect>
				</g>
			</motion.g>

			{/* Green interactive spots */}
			<motion.g
        id="GreenSpots"
        initial={{ opacity: 0, scale: 0.95 }}
        animate={{ opacity: 1, scale: 1 }}
        transition={{ delay: 0.5, duration: 0.4 }}
      >
				{nonSelectedSpots.map((id) => {
          const { d, type, title } = dMap[id];
          return renderSpot(id, d, type, latestSpot, title);
        })}
			</motion.g>


      {/* Decorative Elements */}
			<motion.g
        id="Decorations"
        initial={{ opacity: 0, y: 10 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ delay: 0.8, duration: 0.4 }}
      >
				<g id="Decorations" stroke="#545554" fill="none">

					{/* --- Staircase (Diagonal Complex) --- */}
					<g id="staircase">
						<path d="M570.37,447.85l-33.4-32.74-10.22,10.42.32,32.37,17.05,16.72c7.39,7.25,19.26,7.13,26.5-.26,7.25-7.39,7.13-19.26-.26-26.5Z" />
						<path d="M558.91,459.5l-24.23-23.76c-1.03-1.01-2.77-.27-2.76,1.17l.03,2.88,23.69,23.23c.98.96,2.57.91,3.48-.13.86-.97.71-2.49-.22-3.4Z" />
						<g>
							<g>
								<line x1="555.66" y1="463" x2="544.32" y2="474.57" />
								<line x1="556.65" y1="463.75" x2="550.24" y2="478.67" />
								<line x1="557.47" y1="463.87" x2="556.88" y2="479.97" />
								<line x1="558.15" y1="463.4" x2="563.52" y2="478.9" />
								<line x1="558.84" y1="463.18" x2="569.33" y2="475.57" />
								<line x1="559.43" y1="462.69" x2="573.59" y2="470.39" />
								<line x1="559.72" y1="461.94" x2="575.87" y2="464.03" />
								<line x1="559.57" y1="461.16" x2="575.65" y2="457.21" />
								<line x1="559.54" y1="460.27" x2="572.94" y2="450.89" />
							</g>
							<line x1="552.85" y1="460.39" x2="541.41" y2="472.05" />
							<line x1="550.12" y1="457.72" x2="538.68" y2="469.38" />
							<line x1="568.88" y1="446.54" x2="557.44" y2="458.21" />
							<line x1="566.16" y1="443.88" x2="554.72" y2="455.54" />
							<line x1="563.62" y1="441.39" x2="552.18" y2="453.06" />
							<line x1="560.9" y1="438.72" x2="549.46" y2="450.39" />
							<line x1="558.48" y1="436.35" x2="547.05" y2="448.02" />
							<line x1="555.76" y1="433.68" x2="544.32" y2="445.35" />
						</g>
						<g>
							<g>
								<path d="M566.98,450.28c5.87,5.76,5.97,15.18.21,21.06-5.76,5.87-15.18,5.97-21.06.21" />
								<line x1="566.98" y1="450.28" x2="544.56" y2="428.29" />
								<line x1="546.13" y1="471.54" x2="535.5" y2="461.12" />
							</g>
							<polygon points="540.35 424.17 546.62 426.19 542.5 430.4 540.35 424.17" />
						</g>
						<g>
							<g>
								<path d="M561.88,456.57c2.69,2.64,2.74,6.96.1,9.66s-6.96,2.74-9.66.1" />
								<line x1="561.88" y1="456.57" x2="538.92" y2="434.05" />
								<line x1="552.32" y1="466.32" x2="541.14" y2="455.36" />
							</g>
							<polygon points="536.93 451.23 543.21 453.25 539.08 457.46 536.93 451.23" />
						</g>
					</g>

					{/* --- Stair2 --- */}
					<g id="Stair2">
						<rect x="861.54" y="185.48" width="65.11" height="27.05" />
						{[...Array(9)].map((_, i) => (
							<line
								key={`stair2-line-${i}`}
								x1={871.65 + i * 5.57}
								y1={185.33}
								x2={871.65 + i * 5.57}
								y2={212.38}
							/>
						))}
						<line x1="870.68" y1="193.81" x2="924.41" y2="193.81" />
						<polygon points="862.89 193.79 870.68 189.9 870.68 197.68 862.89 193.79" />
						<line x1="917.74" y1="206.62" x2="864.01" y2="206.62" />
						<polygon points="925.52 206.6 917.74 202.71 917.74 210.49 925.52 206.6" />
					</g>

					{/* --- Stair1 --- */}
					<g id="Stair1">
						<rect x="292.56" y="299.42" width="32.37" height="13.45" />
						{[...Array(9)].map((_, i) => (
							<line
								key={`stair1-line-${i}`}
								x1={297.58 + i * 2.77}
								y1={299.35}
								x2={297.58 + i * 2.77}
								y2={312.8}
							/>
						))}
						<line x1="297.1" y1="303.57" x2="323.82" y2="303.57" />
						<polygon points="293.23 303.56 297.1 301.62 297.1 305.49 293.23 303.56" />
						<line x1="320.5" y1="309.94" x2="293.78" y2="309.94" />
						<polygon points="324.37 309.93 320.5 307.99 320.5 311.86 324.37 309.93" />
					</g>

					{/* --- Elevator1 --- */}
					<g id="Elevator1">
						<path d="M865.81,224.04c0-.1,0-.18,0-.26,0-.59,0-1.18,0-1.77,0-.29.1-.41.35-.41,3.05,0,6.1,0,9.15,0,.26,0,.36.11.36.42,0,.66,0,1.32,0,2.01.09,0,.17,0,.25,0,3.2,0,6.39,0,9.59,0,.37,0,.44.07.44.5,0,8.29,0,16.58,0,24.87,0,.42-.07.5-.43.5-7.32,0-14.63,0-21.95,0-.76,0-1.52,0-2.28,0-.31,0-.39-.09-.39-.44,0-8.33,0-16.67,0-25,0-.34.08-.43.38-.43,1.42,0,2.83,0,4.25,0,.09,0,.18,0,.3,0ZM862.9,249.3v-.37c0-7.32,0-14.65,0-21.97,0-.11,0-.21,0-.32,0-.19.1-.3.27-.32.1,0,.2,0,.3,0,4.86,0,9.71,0,14.57,0,.54,0,.55,0,.55.62,0,7.35,0,14.71,0,22.06q0,.32.29.32c2.08,0,4.16,0,6.25,0q.3,0,.3-.33c0-8.02,0-16.04,0-24.06q0-.28-.24-.28c-3.37,0-6.73,0-10.1,0-4.47,0-8.93,0-13.4,0-.09,0-.17,0-.27,0v24.65h1.48ZM863.44,226.91c0,.11-.01.19-.01.27,0,7.28,0,14.56,0,21.84,0,.29,0,.29.27.29,2.17,0,4.34,0,6.51,0,.27,0,.27,0,.27-.31,0-7.27,0-14.55,0-21.82,0-.21-.04-.28-.24-.28-2.2,0-4.39,0-6.59,0-.07,0-.14,0-.23,0ZM871.01,249.29c.11,0,.2.02.3.02,2.17,0,4.34,0,6.51,0,.25,0,.26,0,.26-.29,0-7.28,0-14.56,0-21.84,0-.22-.05-.27-.24-.27-2.19,0-4.38,0-6.57,0-.25,0-.26,0-.26.29,0,7.27,0,14.55,0,21.82,0,.08,0,.17,0,.27ZM866.36,224.03h8.77v-1.79h-8.77v1.79Z" />
						<path d="M882.01,236.53c-.52,0-1.04,0-1.56,0-.15,0-.28-.02-.34-.2-.06-.17.02-.28.12-.39.51-.57,1.01-1.14,1.52-1.71.21-.24.32-.24.54,0,.51.57,1.02,1.15,1.53,1.73.09.1.17.22.1.38-.06.15-.17.19-.31.19-.53,0-1.07,0-1.6,0ZM882.04,234.84c-.33.37-.66.73-.97,1.07h1.91c-.33-.38-.65-.74-.94-1.07Z" />
						<path d="M882.01,238.69c.53,0,1.06,0,1.59,0,.13,0,.28.02.3.18.02.12-.02.29-.09.37-.51.6-1.04,1.19-1.57,1.78-.17.19-.3.18-.47,0-.52-.58-1.04-1.17-1.56-1.76-.09-.1-.17-.21-.11-.37.06-.16.18-.19.33-.19.53,0,1.06,0,1.59,0ZM882.02,240.37c.3-.34.62-.7.95-1.08h-1.91c.32.36.64.72.96,1.08Z" />
					</g>

					{/* --- Stair3 --- */}
					<g id="Stair3">
						<rect x="866.08" y="507.5" width="54.18" height="22.51" />
						{[874.49, 879.13, 883.77, 888.41, 893.05, 897.69, 902.33, 906.97, 911.6].map((x, i) => (
							<line key={`stair3-line-${i}`} x1={x} y1={507.37} x2={x} y2={529.89} />
						))}
						<g>
							<line x1="873.69" y1="514.43" x2="918.4" y2="514.43" />
							<polygon points="867.21 514.41 873.69 511.18 873.69 517.65 867.21 514.41" />
						</g>
						<g>
							<line x1="912.85" y1="525.09" x2="868.14" y2="525.09" />
							<polygon points="919.32 525.08 912.85 521.84 912.85 528.31 919.32 525.08" />
						</g>
					</g>

					{/* --- Bathroom --- */}
					<path
						id="Bathroom"
						d="M897.33,293.06c-.52,0-1.01,0-1.5,0-1.69-.02-3.19-1.49-3.25-3.17-.02-.57.1-.7.65-.7.8,0,1.59,0,2.39,0,.02,0,.05-.01.15-.04-1.96-1.37-3.1-3.19-3.18-5.58-.08-2.39.85-4.32,2.73-5.77,2.67-2.06,6.61-1.69,8.91.83,1.43,1.57,2.02,3.44,1.75,5.56-.27,2.12-1.36,3.73-3.06,4.99.73,0,1.46.02,2.19,0,.92-.04,1.06.15.87,1.12-.33,1.67-1.67,2.76-3.35,2.77-.44,0-.89,0-1.36,0,.1,1.18.2,2.31.3,3.44.13,1.48.27,2.97.4,4.45.05.53.11,1.07.14,1.61.01.24.1.31.33.31.94-.01,1.88,0,2.82,0,1.46,0,2.92,0,4.38,0,.12,0,.24-.01.37-.02.23-1.4.44-2.79.68-4.17.05-.28-.14-.3-.28-.39-1.52-.93-2.36-2.3-2.39-4.09-.01-.54.07-1.08,0-1.64-.08-.67.4-1.17,1.18-1.43-.2-.3-.41-.6-.6-.9-.41-.66-.59-1.38-.6-2.16,0-1.08,0-2.15,0-3.23,0-.92.58-1.52,1.48-1.52,2.23,0,4.46,0,6.69,0,.82,0,1.42.59,1.43,1.43.01,1.11,0,2.22,0,3.34,0,1.07-.37,2-1.04,2.82-.05.06-.1.13-.15.2.23.12.45.2.64.34.52.39.68,1.07.45,1.71-.04.11-.1.25-.06.33.3.57.16,1.15.03,1.71-.32,1.36-1.1,2.4-2.3,3.09-.22.12-.28.25-.24.49.21,1.24.43,2.47.62,3.72.05.31.17.37.44.36.65-.01,1.3-.02,1.95,0,.18,0,.4.07.52.19.25.24.09.66-.25.74-.12.03-.24.02-.36.02-8.46,0-16.92,0-25.38,0-.16,0-.34.04-.46-.03-.16-.09-.34-.24-.38-.41-.06-.22.07-.43.33-.48.14-.03.29-.04.43-.04,1.24,0,2.48,0,3.72,0,.26,0,.37-.06.39-.35.24-2.85.51-5.69.77-8.54.03-.28.04-.56.06-.91Z"
					/>
					<path d="M898.83,289.11c0-.17,0-.32,0-.48.01-.96-.02-1.93.05-2.89.06-.88.86-1.5,1.74-1.45.84.04,1.53.77,1.57,1.63,0,.23,0,.46,0,.7,0,.36-.18.58-.46.58-.29,0-.45-.2-.47-.57,0-.28,0-.57-.05-.84-.07-.34-.4-.57-.72-.55-.34.02-.64.28-.69.64-.02.12-.03.24-.03.37,0,.86,0,1.71,0,2.57,0,.1.02.21.03.35.22-.05.48.09.47-.3-.01-.31.07-.6.45-.63.37-.03.46.24.51.54,0,.02.03.04.04.05,2.26-.74,4.28-3.35,3.74-6.51-.48-2.87-3.05-5.05-6.16-4.87-2.7.16-5.09,2.47-5.34,5.35-.28,3.16,1.89,5.45,3.83,6.02.06-.29.13-.6.51-.58.59.03.38.57.52.9h.44Z" />
					<path d="M912.8,284.26c-1.06,0-2.12,0-3.18,0-.53,0-.69.16-.69.69,0,.9.03,1.81,0,2.71-.07,1.39.51,2.45,1.52,3.31.1.09.26.14.39.14,1.14,0,2.29-.03,3.43.02.59.03.98-.17,1.37-.59.69-.75,1.07-1.6,1.06-2.63-.01-1,0-2,0-3,0-.47-.17-.64-.62-.64-1.08,0-2.17,0-3.25,0Z" />
					<path d="M898.28,293.09c-.29,3.27-.58,6.51-.87,9.74h3.79c-.29-3.26-.58-6.49-.88-9.74h-2.04Z" />
					<path d="M916.69,294.09c-.08-.03-.11-.05-.13-.05-2.46,0-4.91,0-7.37-.01-.25,0-.26.12-.25.33.25,2.88,3.3,4.53,5.78,3.1,1.27-.73,1.89-1.89,1.96-3.37Z" />
					<path d="M893.56,290.15c.05.16.07.31.13.43.46,1.04,1.26,1.53,2.37,1.54,1.58,0,3.15.02,4.73.01.79,0,1.59.01,2.38-.08.95-.11,1.78-1.02,1.85-1.9h-11.45Z" />
					<path d="M914.66,302.83c-.22-1.36-.44-2.69-.65-3.96h-2.4c-.21,1.28-.43,2.61-.65,3.96h3.7Z" />
					<path d="M912.82,293.09c.52,0,1.04,0,1.55,0,.6,0,1.2,0,1.81,0,.3,0,.47-.18.49-.48.01-.28-.14-.46-.42-.5-.14-.02-.29-.03-.43-.03-.85,0-1.71,0-2.56,0-1.21,0-2.43,0-3.64,0-.44,0-.69.2-.69.53,0,.3.26.49.68.49,1.07,0,2.14,0,3.21,0Z" />

					{/* --- Library --- */}
					<path
						id="Library"
						d="M310.3,607.08c-2.05-2.03-1.9-4.07.4-5.76,5.8-4.26,11.61-8.5,17.39-12.78.82-.61,1.54-.76,2.55-.5,6.4,1.65,12.82,3.22,19.22,4.84.53.13,1.01.47,1.52.72-.37.47-.66,1.04-1.11,1.41-4.95,4.01-9.94,7.96-14.88,11.98-.74.6-1.39.66-2.26.44-6.02-1.54-12.06-3.05-18.09-4.54-.89-.22-1.81-.36-2.72-.44-1.15-.1-1.83.5-2.07,1.61-.23,1.06.32,1.76,1.22,2.03,2.55.77,5.13,1.48,7.72,2.14,4.57,1.17,9.15,2.25,13.71,3.44.92.24,1.54.07,2.24-.51,4.73-3.97,9.49-7.9,14.24-11.84.3-.25.57-.58.91-.72.34-.14.76-.08,1.14-.1-.13.37-.23.75-.39,1.1-.08.16-.29.26-.44.38-5.05,4.19-10.11,8.37-15.14,12.58-.7.58-1.33.75-2.24.52-6.12-1.58-12.25-3.09-18.38-4.61-.89-.22-1.81-.37-2.72-.42-1.01-.05-1.59.57-1.85,1.53-.26.98.15,1.64.98,2.02.79.36,1.63.64,2.47.85,6.26,1.59,12.54,3.11,18.79,4.75,1.17.31,1.95.16,2.86-.62,4.75-4.02,9.56-7.96,14.35-11.94.22-.19.42-.46.68-.53.32-.09.68,0,1.03,0-.05.3-.06.63-.18.9-.09.2-.34.33-.53.49-5.13,4.25-10.25,8.51-15.42,12.71-.47.38-1.35.6-1.94.46-6.71-1.61-13.39-3.31-20.08-4.99-.42-.11-.84-.23-1.26-.37-3.48-1.16-4.12-3.35-1.7-6.23ZM313.21,601.1c6.82,1.7,13.31,3.34,19.82,4.9.58.14,1.44-.05,1.92-.42,2.33-1.75,4.58-3.61,6.85-5.43,2.45-1.97,4.9-3.94,7.47-6-.4-.15-.61-.25-.83-.31-6.02-1.51-12.05-3.04-18.09-4.49-.5-.12-1.22.11-1.67.43-2.81,1.99-5.58,4.05-8.35,6.1-2.3,1.69-4.59,3.38-7.12,5.23Z"
					/>
				</g>
			</motion.g>

			{/* --- Dashed Navigation Paths --- */}
			<motion.g
        id="Level2_Path"
        stroke="#545554"
        strokeWidth={1}
        strokeDasharray="10 6"
				fill="none"
        opacity={0.65}
        initial={{ strokeDashoffset: 80, opacity: 0 }}
				animate={{ strokeDashoffset: 0, opacity: 1 }}
				transition={{ delay: 1.2, duration: 1.2, ease: 'easeInOut' }}
      >
				<polyline points="347.31 306.13 379.02 298.06 840.96 298.06 840.96 198.93" />
				<polyline points="514.65 298.87 514.65 518.63 406.46 518.63" />
				<line x1="514.65" y1="518.63" x2="847.57" y2="518.63" />
			</motion.g>

			{latestSpot && dMap[latestSpot] && (() => {
        const { d, type, title } = dMap[latestSpot];
        return renderSpot(latestSpot, d, type, latestSpot, title);
      })()}
    </>
  );
}
